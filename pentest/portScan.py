#!/usr/bin/env python2.7
#encoding: utf-8
import sys

try:
    import nmap
except:
    sys.exit("[*] Você não possui a biblioteca do nmap instalada. Instale através do comando: pip install python-nmap.")

# Validando argumentos
if len(sys.argv) != 3:
    sys.exit("[*] Você precisa colocar 3 args: script + ip + port.")

ip = str(sys.argv[1])
port = str(sys.argv[2])

scanner = nmap.PortScanner()
scanner.scan(ip, arguments="-p%s --open" % (port))
for host in scanner.all_hosts():
    if not scanner[host].hostname():
         print ("Não foi possível encontrar o hostname do ip %s") % (host)
    else:
        print ("O ip %s possui o hostname %s") % (host, scanner[host].hostname())
